from flask import Flask, jsonify
from flask_cors import CORS

app = Flask(__name__)
CORS(app, resources={r"/api/*": {"origins": "*"}})
from flask import Flask, jsonify
from flask_cors import CORS

app = Flask(__name__)
CORS(app)

@app.route("/")
def home():
    return "Server running on localhost"





@app.route("/api/status", methods=["GET"])
def get_status():
    data = {
        "status": "CRITICAL",
        "emergency_details": None,
        "last_data": {
            "deviceId": "ESP32-VEHICLE-007",
            "location": {
                "lat": 26.9124,
                "lon": 75.7873
            },
            "impact": {
                "g_force": 0.6478187941199175,
                "gyro_x": 0.19700339390727706,
                "gyro_y": -0.7422092209249653,
                "gyro_z": 0.6868922036820768
            },
            "environment": {
                "in_car_motion": True,
                "is_voice_detected": True,
                "sound_since_impact_ms": 0
            },
            "manual_override": {
                "sos_button_pressed": False
            },
            "biometric": {
                "hr": 70,
                "spo2": 82,
                "bp_sys": 124,
                "bp_dia": 80,
                "ecg_waveform": [
                    97.11330923802016, 27.933147555920446, 46.626897759122166,
                    79.8185363641202, 65.30716745861412, 8.980751063700431,
                    90.90678314148305, 67.26939759589862, 38.749359197379086,
                    55.23552593179599, 73.76655380267289, 13.046590335248787,
                    67.62554172363178, 30.995557315198496, 59.07810560985365,
                    4.4810855194340915, 30.319938543431125, 11.986429000312926,
                    98.01791116505679, 81.68871083998894, 50.21776588597627,
                    48.71313944394624, 58.91891932482702, 17.528897018017364,
                    90.68000874416131, 26.35630765979594, 95.1383823093922,
                    73.44581132160289, 61.03829964274584, 80.06217245205676,
                    37.621457204113604, 75.12315110605176, 66.54322890294804,
                    11.291289231286171, 77.16898584701092, 39.56370373571918,
                    82.49760492368478, 9.674746593299021, 32.277618816049625,
                    85.04384061591135, 19.700311602157306, 56.88608438257086,
                    19.34302470682958, 6.446624322254824, 67.88380108307932,
                    20.249941177238995, 14.308718864468739, 42.330916373118775,
                    82.36874436030386, 1.8176466741266273
                ]
            }
        }
    }
    return jsonify(data)
if __name__ == "__main__":
    app.run(host="127.0.0.1", port=5000, debug=True)
